@inherits CustomerFormComponent

<PageTitle>@Operation Cliente</PageTitle>

<MudText Typo="Typo.h4">@Operation Cliente</MudText>

@if (IsBusy)
{
    <MudPaper Class="pa-8 mt-4">
        <MudSkeleton Height="55px" />
        <MudSkeleton Height="110px" />
        <MudSkeleton Height="55px" />
        <MudSkeleton Height="110px" />
        <MudSkeleton Height="55px" />
    </MudPaper>
}
else
{
    <MudPaper Class="pa-8 mt-4" Elevation="2">
        <EditForm Model="InputModel" OnValidSubmit="OnValidSubmitAsync">
            <ObjectGraphDataAnnotationsValidator />

            <MudText Class="mb-6" Typo="Typo.h6">Dados Pessoais</MudText>

            <MudGrid>
                <MudItem>
                    <MudRadioGroup T="ECustomerType" Value="InputModel.CustomerType" ValueChanged="OnCustomerTypeChanged">
                        <MudRadio Value="ECustomerType.Individual">Pessoa Física</MudRadio>
                        <MudRadio Value="ECustomerType.Business">Pessoa Jurídica</MudRadio>
                    </MudRadioGroup>
                </MudItem>
            </MudGrid>

            <MudGrid>
                <MudItem lg="2" xs="12" sm="6">
                    <MudTextField Label="@DocumentType"
                                  @bind-Value="InputModel.DocumentNumber"
                                  For="@(() => InputModel.DocumentNumber)"
                                  Mask="DocumentCustomerMask"
                                  OnBlur="ValidateDocument"
                                  ErrorText="@ErrorText"
                                  Error="Error"
                                  Immediate="true" 
                                  @key="DocumentCustomerMask" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="@(InputModel.CustomerType == ECustomerType.Individual ? "Nome" : "Razão Social")"
                                  @bind-Value="InputModel.Name"
                                  For="@(() => InputModel.Name)" />
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    @if (InputModel.CustomerType == ECustomerType.Individual)
                    {
                        <MudTextField Label="Rg"
                                      @bind-Value="InputModel.Rg"
                                      For="@(() => InputModel.Rg)"
                                      MaxLength="20" />
                    }
                    else
                    {
                        <MudTextField Label="Nome Fantasia"
                                      @bind-Value="InputModel.BusinessName"
                                      For="@(() => InputModel.BusinessName)" />
                    }
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Telefone"
                                  @bind-Value="InputModel.Phone"
                                  For="@(() => InputModel.Phone)"
                                  Mask="PhoneMask" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="E-mail"
                                  @bind-Value="InputModel.Email"
                                  For="@(() => InputModel.Email)" />
                </MudItem>
            </MudGrid>

            <MudText Class="mt-6 mb-6" Typo="Typo.h6">Endereço</MudText>

            <MudGrid>
                <MudItem lg="2" xs="12" sm="6">
                    <MudTextField Label="CEP"
                                  @bind-Value="InputModel.Address.ZipCode"
                                  For="@(() => InputModel.Address.ZipCode)"
                                  Mask="ZipCodeMask"
                                  OnBlur="SearchAddressAsync"/>
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Logradouro"
                                  @bind-Value="InputModel.Address.Street"
                                  For="@(() => InputModel.Address.Street)"/>
                </MudItem>

                <MudItem lg="2" xs="12" sm="6">
                    <MudTextField Label="Número"
                                  @bind-Value="InputModel.Address.Number"
                                  For="@(() => InputModel.Address.Number)"
                                  MaxLength="10"/>
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Complemento"
                                  @bind-Value="InputModel.Address.Complement"
                                  For="@(() => InputModel.Address.Complement)"/>
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Bairro"
                                  @bind-Value="InputModel.Address.Neighborhood"
                                  For="@(() => InputModel.Address.Neighborhood)"/>
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Cidade"
                                  @bind-Value="InputModel.Address.City"
                                  For="@(() => InputModel.Address.City)"/>
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Estado"
                                  @bind-Value="InputModel.Address.State"
                                  For="@(() => InputModel.Address.State)"/>
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="País"
                                  @bind-Value="InputModel.Address.Country"
                                  For="@(() => InputModel.Address.Country)"/>
                </MudItem>
            </MudGrid>

            <MudButton ButtonType="ButtonType.Submit"
                       Variant="Variant.Filled"
                       Color="Color.Primary"
                       Class="mt-6">
                Salvar
            </MudButton>
        </EditForm>
    </MudPaper>
}