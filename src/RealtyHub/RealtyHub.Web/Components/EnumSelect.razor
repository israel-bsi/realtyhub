@using System.Reflection
@typeparam TEnum

<MudSelect T="TEnum" Label="@Label" @bind-Value="SelectedValue" Disabled="@Disabled">
    @foreach (var value in Enum.GetValues(typeof(TEnum)).Cast<TEnum>())
    {
        <MudSelectItem Value="value">@GetDisplayName(value)</MudSelectItem>
    }
</MudSelect>

@code {
    [Parameter] public required TEnum SelectedValue { get; set; }
    [Parameter] public EventCallback<TEnum> SelectedValueChanged { get; set; }
    [Parameter] public string Label { get; set; } = string.Empty;
    [Parameter] public bool Disabled { get; set; }

    private string GetDisplayName(TEnum value)
    {
        var field = value!.GetType().GetField(value.ToString() ?? string.Empty);
        var displayAttribute = field?.GetCustomAttribute<DisplayAttribute>();
        return displayAttribute?.Name ?? value.ToString()!;
    }
}