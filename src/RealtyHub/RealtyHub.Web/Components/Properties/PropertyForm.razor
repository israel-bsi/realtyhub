@inherits PropertyFormComponent

<PageTitle>@Operation Imóvel</PageTitle>

<MudText Typo="Typo.h4">@Operation Imóvel</MudText>

@if (IsBusy)
{
    <MudPaper Class="pa-8 mt-4">
        <MudSkeleton Height="55px" />
        <MudSkeleton Height="110px" />
        <MudSkeleton Height="55px" />
        <MudSkeleton Height="110px" />
        <MudSkeleton Height="55px" />
    </MudPaper>
}
else
{
    <MudPaper Class="pa-8 mt-4" Elevation="2">
        <EditForm Model="InputModel" OnValidSubmit="OnValidSubmitAsync">
            <ObjectGraphDataAnnotationsValidator />

            <MudText Class="mb-6" Typo="Typo.h6">Dados do Imóvel</MudText>

            <MudGrid>
                <MudItem lg="2" xs="12" sm="6">
                    <EnumSelect TEnum="EPropertyType"
                                Label="Tipo do Imóvel"
                                @bind-SelectedValue="InputModel.PropertyType">
                    </EnumSelect>
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudCheckBox @bind-Value="InputModel.IsNew"
                                 For="@(() => InputModel.IsNew)"
                                 Label="Propriedade Nova">
                    </MudCheckBox>
                </MudItem>
            </MudGrid>

            <MudGrid>
                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Título"
                                  @bind-Value="InputModel.Title"
                                  For="@(() => InputModel.Title)"
                                  InputType="InputType.Text" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Preço"
                                  T="decimal"
                                  Variant="Variant.Text"
                                  Format="C"
                                  @bind-Value="InputModel.Price"
                                  For="@(() => InputModel.Price)"/>
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Quartos"
                                  @bind-Value="InputModel.Bedroom"
                                  For="@(() => InputModel.Bedroom)"
                                  InputType="InputType.Number"
                                  Mask="@Utility.Masks.Number" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Banheiros"
                                  @bind-Value="InputModel.Bathroom"
                                  For="@(() => InputModel.Bathroom)"
                                  InputType="InputType.Number"
                                  Mask="@Utility.Masks.Number" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Garagens"
                                  @bind-Value="InputModel.Garage"
                                  For="@(() => InputModel.Garage)"
                                  InputType="InputType.Number"
                                  Mask="@Utility.Masks.Number" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Área(m²) "
                                  @bind-Value="InputModel.Area"
                                  For="@(() => InputModel.Area)"
                                  InputType="InputType.Number" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Detalhes da transação"
                                  @bind-Value="InputModel.TransactionsDetails"
                                  For="@(() => InputModel.TransactionsDetails)"
                                  InputType="InputType.Text"/>
                </MudItem>

            </MudGrid>

            <MudText Class="mt-6 mb-6" Typo="Typo.h6">Endereço</MudText>

            <MudGrid>
                <MudItem lg="2" xs="12" sm="6">
                    <MudTextField Label="CEP"
                                  @bind-Value="InputModel.Address.ZipCode"
                                  For="@(() => InputModel.Address.ZipCode)"
                                  Mask="@Utility.Masks.ZipCode"
                                  OnBlur="SearchAddressAsync"
                                  InputType="InputType.Text" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Logradouro"
                                  @bind-Value="InputModel.Address.Street"
                                  For="@(() => InputModel.Address.Street)" />
                </MudItem>

                <MudItem lg="2" xs="12" sm="6">
                    <MudTextField Label="Número"
                                  @bind-Value="InputModel.Address.Number"
                                  For="@(() => InputModel.Address.Number)"
                                  MaxLength="10" />
                </MudItem>

                <MudItem lg="4" xs="12" sm="6">
                    <MudTextField Label="Complemento"
                                  @bind-Value="InputModel.Address.Complement"
                                  For="@(() => InputModel.Address.Complement)" />
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Bairro"
                                  @bind-Value="InputModel.Address.Neighborhood"
                                  For="@(() => InputModel.Address.Neighborhood)" />
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Cidade"
                                  @bind-Value="InputModel.Address.City"
                                  For="@(() => InputModel.Address.City)" />
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="Estado"
                                  @bind-Value="InputModel.Address.State"
                                  For="@(() => InputModel.Address.State)" />
                </MudItem>

                <MudItem lg="3" xs="12" sm="6">
                    <MudTextField Label="País"
                                  @bind-Value="InputModel.Address.Country"
                                  For="@(() => InputModel.Address.Country)" />
                </MudItem>
            </MudGrid>

            <MudButton ButtonType="ButtonType.Submit"
                       Variant="Variant.Filled"
                       Color="Color.Primary"
                       Class="mt-6">
                Salvar
            </MudButton>
        </EditForm>
    </MudPaper>
}